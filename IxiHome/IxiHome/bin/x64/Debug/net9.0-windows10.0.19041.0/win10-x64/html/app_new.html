<!DOCTYPE html>
<html>
<!-- saved from url=(0016)http://localhost -->

<head lang="en">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, shrink-to-fit=no, user-scalable=no">

    <title>Spixi</title>
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/*SL{SpixiThemeMode}">

    <link rel="stylesheet" type="text/css" href="libs/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" type="text/css" href="libs/fontawesome/css/solid.min.css">


    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.touchSwipe.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/qrcode.min.js"></script>
    <script src="js/spixi.js"></script>

</head>
<body onload="onload()">
    <div id="wrap" class="container-fluid noselect">

        <!-- Toolbar -->
        <div class="spixi-toolbar shadow">
            <div class="spixi-toolbar-row">
                <div id="backbtn" onclick="location.href = 'ixian:back';">
                    <i class="fas fa-arrow-left"></i>
                </div>
                <div>
                    *SL{app-new-title}
                </div>
                <div>
                </div>
            </div>

        </div>
        <div class="spixi-toolbar-holder"></div>
        <!-- End Toolbar -->

        <section class="add-mini-app-container">
            <span class="body-sm s-text-01">*SL{apps-add-note}</span>
            <div>
                <textarea type="text" class="spixi-textfield add-mini-app-url-input" id="addressInput" placeholder="*SL{apps-add-url-placeholder}"></textarea>
                <p class="label-xs s-text-01" id="app-url-input-err-label" style="display: none">*SL{apps-add-invalid-url}</p>
            </div>
            <div class="add-mini-app-buttons">
                <div id="sendrequest" class="spixi-flat-button label-sm">
                    <i class="fas fa-globe"></i>&nbsp;*SL{apps-get-from-url}
                </div>
                <span class="body-sm s-text-01">or</span>
                <div class="spixi-outline-button label-sm" onclick="scanAppCode()">
                    <i class="fas fa-qrcode"></i>&nbsp; *SL{apps-scan}
                </div>
            </div>

            <div class="important-notice-container extended push-to-bottom">
                <i class="fa fa-lock"></i>
                <div class="important-notice-text">
                    <span class="label-sm">*SL{apps-what-is-title}</span>
                    <span class="body-xs">*SL{apps-what-is-description}</span>
                </div>
            </div>
        </section>
        
    </div>


    <script type="text/javascript">
        var sendrequest = document.getElementById("sendrequest");

        sendrequest.onclick = function () {
            const addressInput = document.getElementById("addressInput");
            const url = addressInput?.value;
            const errLabel = document.getElementById("app-url-input-err-label");

            if (url?.length > 0) {
                addressInput.className = "spixi-textfield add-mini-app-url-input"
                errLabel.style.display = 'none';
                location.href = "ixian:fetch:" + url;
            } else{
                addressInput.className = "spixi-textfield add-mini-app-url-input add-mini-app-url-input-error"
                errLabel.style.display = 'block';
            }
        }

        function scanAppCode() {
            location.href = "ixian:quickscan";
        }

        function setScannedData(appCode) {
            const addressInput = document.getElementById("addressInput");
            addressInput.value = appCode;
        }

        function showUrlError() {
            const addressInput = document.getElementById("addressInput");
            const errLabel = document.getElementById("app-url-input-err-label");
            addressInput.className = "spixi-textfield add-mini-app-url-input add-mini-app-url-input-error"
            errLabel.style.display = 'block';
        }
    </script>

</body>
</html>